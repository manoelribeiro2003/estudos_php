<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adivinhacao</title>
    <link rel="stylesheet" href="../bootstrap/bootstrap.min.css">
    <script src="../bootstrap/bootstrap.min.js"></script>
    <script src="../bootstrap/jquery.min.js"></script>
    <script src="../bootstrap/popper.min.js"></script>
</head>

<body>
    <div class='card container mt-2' id='cardInicio'>
        <h1>Jogo da Forca</h1>
        <div id="c1" class="row">
            <input class="form-control m-2 col-10" type="text" id="chave1" placeholder="Digite uma palavra">
            <button class="form-control m-2 btn btn-secondary col-1" id="b1" onclick="adicionarPalavra(this)">+</button>
        </div>
        <div id="c2" class="d-none row">
            <input class="form-control m-2 col-10" type="text" id="chave2" placeholder="Digite uma palavra">
            <button class="form-control m-2 btn btn-secondary col-1" id="b2" onclick="adicionarPalavra(this)">+</button>
        </div>
        <div id="c3" class="d-none row">
            <input class="form-control m-2 col-10" type="text" id="chave3" placeholder="Digite uma palavra">
            <button class="form-control m-2 btn btn-secondary col-1" id="b3" onclick="adicionarPalavra(this)">+</button>
        </div>
        <div id="c4" class="d-none row">
            <input class="form-control m-2 col-10" type="text" id="chave4" placeholder="Digite uma palavra">
            <button class="form-control m-2 btn btn-secondary col-1" id="b4" onclick="adicionarPalavra(this)">+</button>
        </div>
        <div id="c5" class="d-none row">
            <input class="form-control m-2 col-10" type="text" id="chave5" placeholder="Digite uma palavra">
        </div>
        <button class='btn btn-primary m-2' onclick="iniciar()">Iniciar</button>
    </div>

    <div class="card container mt-2 d-none" id="cardJogo">
        <div class="m-2">
            <div class="row mt-5">
                <div class="col-4"></div>
                <canvas class="col-3" id="myCanvas" width="400" height="400"></canvas>
                <div class="col-4"></div>
            </div>
            <div class="row">
                <div class="col ">
                    <h1 class="p-2" id="palavra"></h1>
                </div>
                <div class="col- ">
                    <h3 class="p-2" id="tentativas">Tentativas: </h3>
                </div>
                <div class="col- ">
                    <h3 class="p-2" id="tentativa">0</h3>
                </div>

            </div>


        </div>
        <input class="form-control" type="text" id="letra" maxlength="1">
        <button class="m-2 btn btn-primary" onclick="verificar()">Verificar</button>
        <button class="m-2 btn btn-primary" onclick="reiniciar()">Reiniciar</button>
    </div>
</body>

<script>

    c2 = document.getElementById('c2');
    c3 = document.getElementById('c3');
    c4 = document.getElementById('c4');
    c5 = document.getElementById('c5');
    function adicionarPalavra(botao) {
        if (botao.id == 'b1') {
            c2.classList.remove('d-none');
        }
        if (botao.id == 'b2') {
            c3.classList.remove('d-none');
        }
        if (botao.id == 'b3') {
            c4.classList.remove('d-none');
        }
        if (botao.id == 'b4') {
            c5.classList.remove('d-none');
        }
    }




    // chaveApoio = '';
    listaChaves = [];
    cont = 0;
    function iniciar() {
        if (cont == 0) {
            for (i = 1; i <= 5; i++) {
                chave = document.getElementById('chave' + i).value;
                if (chave != "") {
                    listaChaves.push(chave);
                    cont++;
                }
            }
        } else {
            chaveApoio = '';
            posicao = Math.floor(Math.random() * cont);
            chave = listaChaves[posicao];
            alert(listaChaves.splice(posicao, 1));
            cont--;

            for (i = 0; i < chave.length; i++) {
                chaveApoio += "?";
            }

            palavra = document.getElementById("palavra");
            palavra.innerHTML = chaveApoio;

            jogo = document.getElementById("cardJogo");
            jogo.classList.remove("d-none");
            cardIniciar = document.getElementById("cardInicio");
            cardIniciar.classList.add("d-none");
        }
        





        //canvas----------------------------

        //cabeça
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        ctx.beginPath();
        ctx.arc(200, 100, 40, 0, 2 * Math.PI);
        ctx.stroke();

        //tronco
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        ctx.moveTo(200, 250);
        ctx.lineTo(200, 140);
        ctx.stroke();

        // braço direito
        ctx.moveTo(130, 210);
        ctx.lineTo(200, 140);
        ctx.stroke();

        // braço esquerdo
        ctx.moveTo(270, 210);
        ctx.lineTo(200, 140);
        ctx.stroke();

        // perna direita
        ctx.moveTo(200, 250);
        ctx.lineTo(140, 320);
        ctx.stroke();

        //perna esquerda
        ctx.moveTo(200, 250);
        ctx.lineTo(260, 320);
        ctx.stroke();

        //corda
        ctx.moveTo(200, 60);
        ctx.lineTo(200, 0);
        ctx.stroke();

        //haste horizontal
        ctx.moveTo(200, 0);
        ctx.lineTo(0, 0);
        ctx.stroke();

        //haste vertical
        ctx.moveTo(0, 0);
        ctx.lineTo(0, 400);
        ctx.stroke();

    }

    qtdTentativas = 5;
    var letrasDigitadas = [];
    function verificar() {
        letra = document.getElementById('letra');
        letrasDigitadas.push(letra.value);

        encontrou = false;
        for (i = 0; i < chave.length; i++) {
            if (letra.value == chave[i]) {
                chaveApoio = chaveApoio.substring(0, i) + letra.value + chaveApoio.substring(i + 1, chave.length);
            }
        }
        palavra.innerHTML = chaveApoio;

        tentativa = document.getElementById('tentativa');
        contador++;
        tentativa.innerHTML = contador;

        letra.value = "";

        if (chave == chaveApoio) {
            alert("Parabéns. Você ganhou! :)");
        }
    }

    qtdTentativas = 5;
    var letrasDigitadas = [];
    function verificar() {
        letra = document.getElementById('letra');
        letrasDigitadas.push(letra.value);

        encontrou = false;
        for (i = 0; i < chave.lenght; i++) {
            if (letra.value == chave[i]) {
                encontrou = true;
                chaveApoio = chaveApoio.substring(0, i);
            }
        }
    }

    function funLetrasDigitadas() {
        frase = 'Letras Digitadas: ';
        pLetrasDigitadas = document.getElementById('letrasDigitadas');
        for (i = 0; i < letrasDigitadas.lenght - 1; i++) {
            frase += letrasDigitadas[i] + ", ";
        }
        frase += letrasDigitadas[i];
        pLetrasDigitadas.innerHTML = frase;
    }

    function finalizar() {
        if (!qtdTentativas) {
            jogo.classList.add("d-none");
            alert("Fim de jogo, você perdeu!");
            location.reload(true);
        }
        if (chaveApoio == chave) {
            jogo.classList.add('d-none');
            alert("Fim de jogo, você perdeu!");
            location.reload(true);
        }
    }

    function reiniciar() {
        location.reload(true);
    }


    //cabeça
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    ctx.beginPath();
    ctx.arc(200, 100, 40, 0, 2 * Math.PI);
    ctx.stroke();

    //tronco
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    ctx.moveTo(200, 250);
    ctx.lineTo(200, 140);
    ctx.stroke();

    // braço direito
    ctx.moveTo(130, 210);
    ctx.lineTo(200, 140);
    ctx.stroke();

    // braço esquerdo
    ctx.moveTo(270, 210);
    ctx.lineTo(200, 140);
    ctx.stroke();

    // perna direita
    ctx.moveTo(200, 250);
    ctx.lineTo(140, 320);
    ctx.stroke();

    //perna esquerda
    ctx.moveTo(200, 250);
    ctx.lineTo(260, 320);
    ctx.stroke();

    //corda
    ctx.moveTo(200, 60);
    ctx.lineTo(200, 0);
    ctx.stroke();

    //haste horizontal
    ctx.moveTo(200, 0);
    ctx.lineTo(0, 0);
    ctx.stroke();

    //haste vertical
    ctx.moveTo(0, 0);
    ctx.lineTo(0, 400);
    ctx.stroke();


    function finalizar() {
        if (!qtdTentativas) {
            jogo.classList.add('d-none');
            alert("Fim de jogo, você perdeu!");
            if (cont) {
                qtdTentativas = 6;
                tentativas = document.getElementById('tentativas');
                tentativas.innerHTML = "Quantidade de tentativas: " + qtdTentativas;
                letrasDigitadas = [];
                frase = '';
                pLetrasDigitadas = document.getElementById('letrasDigitadas');
                pLetrasDigitadas.innerHTML = 'Letras Digitadas: '
                iniciar();
            } else {
                location.reload(true);
            }
        }
    }


</script>

</html>